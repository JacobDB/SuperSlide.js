"use strict";var OSREC=OSREC||{};OSREC.superslide=function(p){var me=this;me.p=p,me.p.animation=me.p.animation||"slideLeft",me.p.duration=me.p.duration||.5,me.p.allowDrag=void 0===me.p.allowDrag||me.p.allowDrag,me.p.slideContent=void 0===me.p.slideContent||me.p.slideContent,me.p.allowContentInteraction=void 0!==me.p.allowContentInteraction&&me.p.allowContentInteraction,me.p.closeOnBlur=void 0!==me.p.closeOnBlur&&me.p.closeOnBlur,me.p.width=me.p.width||"70vw",me.p.height=me.p.height||"100px",me.p.dragThreshold=me.p.dragThreshold||70,me.p.openThreshold=me.p.openThreshold||70,me.p.closeThreshold=me.p.closeThreshold||20,me.p.beforeOpen="function"==typeof me.p.beforeOpen?me.p.beforeOpen:function(){},me.p.onOpen="function"==typeof me.p.onOpen?me.p.onOpen:function(){},me.p.beforeClose="function"==typeof me.p.beforeClose?me.p.beforeClose:function(){},me.p.onClose="function"==typeof me.p.onClose?me.p.onClose:function(){},me.p.onDrag="function"==typeof me.p.onDrag?me.p.onDrag:function(){},me.body=document,me.p.isOpen=!1;me.p.cssTransitionEndEvent=function(){var t,el=document.createElement("dummy"),transitions={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in transitions)if(void 0!==el.style[t])return transitions[t]}(),function(){function CustomEvent(event,params){params=params||{bubbles:!1,cancelable:!1,detail:void 0};var evt=document.createEvent("CustomEvent");return evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail),evt}CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent}();var clientWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0);Math.max(document.documentElement.clientHeight,window.innerHeight||0);switch(me.p.sliderTransformClose="",me.p.contentTransformClose="",me.p.animation){case"slideLeft":me.p.slider.style.cssText=`position: fixed; overflow-y: auto; -webkit-overflow-scrolling: touch; width: ${me.p.width}; height: 100%; top: 0px; left: -${me.p.width};`,me.p.slider.style.transition=`${me.p.duration}s`,me.p.sliderTransform=`translate3d(${me.p.width},0,0)`,me.p.slider.parentNode.style.overflowX="hidden",me.p.contentTransform=`translate3d(${me.p.width},0,0)`,me.p.touchStartFunction=function(e){var startX=e.changedTouches[0].clientX;if(me.p.isOpen||!(startX>me.p.dragThreshold)){me.p.content.style.transition="none",me.p.slider.style.transition="none";var sliderStartPosition=me.p.isOpen?me.p.slider.offsetWidth:0,translation=0,delta=0,completion=0,touchMoveFunction=function(e){delta=e.changedTouches[0].clientX-startX,(translation=sliderStartPosition+delta)>me.p.slider.offsetWidth&&(translation=me.p.slider.offsetWidth),translation<0&&(translation=0),completion=delta>=me.p.slider.offsetWidth?1:delta<=0?0:delta/me.p.slider.offsetWidth,me.p.onDrag(completion),me.p.slider.style.transform=`translate3d(${translation}px, 0, 0)`,me.p.slideContent&&(me.p.content.style.transform=me.p.slider.style.transform),me.p.slider.style.opacity=.999},touchEndFunction=function(e){me.body.removeEventListener("touchmove",touchMoveFunction),me.p.slider.style.transition=`${me.p.duration}s`,me.p.slideContent&&(me.p.content.style.transition=`${me.p.duration}s`),!me.p.isOpen&&delta>=me.p.openThreshold?me.open(!0):me.p.isOpen&&delta<-me.p.closeThreshold?me.close(!0):me.p.isOpen?me.open(!0):me.close(!0),me.body.removeEventListener("touchend",touchEndFunction)};me.body.addEventListener("touchend",touchEndFunction),me.body.addEventListener("touchmove",touchMoveFunction)}};break;case"slideRight":me.p.slider.style.cssText=`position: fixed; overflow-y: auto; -webkit-overflow-scrolling: touch; width: ${me.p.width}; height: 100%; top: 0px; left: 100%;`,me.p.slider.style.transition=`${me.p.duration}s`,me.p.sliderTransform=`translate3d(-${me.p.width},0,0)`,me.p.slider.parentNode.style.overflowX="hidden",me.p.contentTransform=`translate3d(-${me.p.width},0,0)`,me.p.touchStartFunction=function(e){var startX=e.changedTouches[0].clientX;if(me.p.isOpen||!(startX<clientWidth-me.p.dragThreshold)){me.p.content.style.transition="none",me.p.slider.style.transition="none";var sliderStartPosition=me.p.isOpen?-me.p.slider.offsetWidth:0,translation=0,delta=0,completion=0,touchMoveFunction=function(e){delta=e.changedTouches[0].clientX-startX,(translation=sliderStartPosition+delta)<-me.p.slider.offsetWidth&&(translation=-me.p.slider.offsetWidth),translation>0&&(translation=0),completion=-1*delta>=me.p.slider.offsetWidth?1:-1*delta<=0?0:-1*delta/me.p.slider.offsetWidth,me.p.onDrag(completion),me.p.slider.style.transform=`translate3d(${translation}px, 0, 0)`,me.p.slideContent&&(me.p.content.style.transform=me.p.slider.style.transform),me.p.slider.style.opacity=.999},touchEndFunction=function(e){me.body.removeEventListener("touchmove",touchMoveFunction),me.p.slider.style.transition=`${me.p.duration}s`,me.p.slideContent&&(me.p.content.style.transition=`${me.p.duration}s`),!me.p.isOpen&&delta<=-me.p.openThreshold?me.open(!0):me.p.isOpen&&delta>me.p.closeThreshold?me.close(!0):me.p.isOpen?me.open(!0):me.close(!0),me.body.removeEventListener("touchend",touchEndFunction)};me.body.addEventListener("touchend",touchEndFunction),me.body.addEventListener("touchmove",touchMoveFunction)}};break;case"slideTop":me.p.slider.style.cssText=`position: fixed; overflow-x: auto; -webkit-overflow-scrolling: touch; width: 100%; height: ${me.p.height}; top: -${me.p.height}; left: 0;`,me.p.slider.style.transition=`${me.p.duration}s`,me.p.sliderTransform=`translate3d(0,${me.p.height},0)`,me.p.contentTransform=`translate3d(0,${me.p.height},0)`,me.p.allowDrag=!1,me.p.touchStartFunction=function(e){};break;case"slideBottom":me.p.slider.style.cssText=`position: fixed; overflow-x: auto; -webkit-overflow-scrolling: touch; width: 100%; height: ${me.p.height}; top: 100vh; left: 0;`,me.p.slider.style.transition=`${me.p.duration}s`,me.p.sliderTransform=`translate3d(0,-${me.p.height},0)`,me.p.slider.parentNode.style.overflowX="hidden",me.p.contentTransform=`translate3d(0,-${me.p.height},0)`,me.p.allowDrag=!1}return me.p.closeOnBlurFunction=function(e){e.preventDefault(),me.close.call(me)},me.p.slideContent&&(me.p.content.style.transition=`${me.p.duration}s`),me.p.allowDrag&&me.body.addEventListener("touchstart",me.p.touchStartFunction),me.p.allowContentInteraction?me.p.contentTouchStartFunction=function(e){}:me.p.contentTouchStartFunction=function(e){e.preventDefault()},me.p.slider.offsetHeight,me.p.slider.style.transition=`${me.p.duration}s`,me.p.content.style["-webkit-tap-highlight-color"]="transparent",me},OSREC.superslide.prototype.open=function(doPartialAnimation){var me=this;return!doPartialAnimation&&me.p.isOpen?Promise.resolve():new Promise(function(resolve,reject){var onOpenTransitionEnd=function(e){(e.target||e.srcElement||e.originalTarget)==me.p.slider&&(me.p.onOpen(),me.p.isOpen=!0,me.p.slider.removeEventListener(me.p.cssTransitionEndEvent,onOpenTransitionEnd),me.p.content.addEventListener("touchstart",me.p.contentTouchStartFunction),me.p.closeOnBlur&&(me.body.removeEventListener("touchstart",me.p.touchStartFunction),me.p.content.addEventListener("touchstart",me.p.closeOnBlurFunction),me.p.content.addEventListener("click",me.p.closeOnBlurFunction)),resolve())};me.p.beforeOpen(),me.p.slider.addEventListener(me.p.cssTransitionEndEvent,onOpenTransitionEnd),me.p.slider.style.transform=me.p.sliderTransform,me.p.slider.style.opacity=1,me.p.slideContent&&(me.p.content.style.transform=me.p.contentTransform)})},OSREC.superslide.prototype.close=function(doPartialAnimation){var me=this;return doPartialAnimation||me.p.isOpen?new Promise(function(resolve,reject){var onCloseTransitionEnd=function(e){(e.target||e.srcElement||e.originalTarget)==me.p.slider&&(me.p.onClose(),me.p.isOpen=!1,me.p.slider.removeEventListener(me.p.cssTransitionEndEvent,onCloseTransitionEnd),me.p.content.removeEventListener("touchstart",me.p.contentTouchStartFunction),me.p.closeOnBlur&&(me.body.addEventListener("touchstart",me.p.touchStartFunction),me.p.content.removeEventListener("touchstart",me.p.closeOnBlurFunction),me.p.content.removeEventListener("click",me.p.closeOnBlurFunction)),resolve())};me.p.beforeClose(),me.p.slider.addEventListener(me.p.cssTransitionEndEvent,onCloseTransitionEnd),me.p.slider.style.transform=me.p.sliderTransformClose,me.p.slider.style.opacity=1,me.p.slideContent&&(me.p.content.style.transform=me.p.contentTransformClose)}):Promise.resolve()},OSREC.superslide.prototype.toggle=function(){return this.p.isOpen?(console.log("close"),this.close()):(console.log("open"),this.open())},OSREC.superslide.prototype.isOpen=function(){return this.p.isOpen},OSREC.superslide.prototype.ready=function(){return this.p.readyPromise},OSREC.superslide.prototype.destroy=function(){var me=this;this.close().then(function(){me.body.removeEventListener("touchstart",me.p.touchStartFunction),me.body=null,me.p.content.removeEventListener("touchstart",me.p.closeOnBlurFunction),me.p.content.removeEventListener("click",me.p.closeOnBlurFunction),me.p.content=null,me.p.slider=null,me.p=null})};var hasDefine="function"==typeof define,hasExports="undefined"!=typeof module&&module.exports,root="undefined"==typeof window?global:window;hasDefine?define([],function(){return OSREC.superslide}):hasExports?module.exports=OSREC.superslide:root.OSREC=OSREC;